# ä¸ä¼šç¼–è¯‘åŸç†çš„ BE ä¸æ˜¯å¥½ CRUD boy

2021.12.23 @ Shopee Academy

--

æ•´ä¸ªæ´»å„¿<!-- .element: class="r-fit-text" -->

--

## ç™½é‡‘èµåŠ©

* Shopee Academy
* ShopeePlay/ğŸ¦ç©ä¹é˜Ÿ<!-- .element: class="fragment" data-fragment-index="1" -->
  * å°¤å…¶æ˜¯ Levi

--

## Anqur

* Engineering Infra BE
* Since 2020.12.2
* è´æ–¯/å‰ä»–/å£é£ç´/æ°´ç¾¤<!-- .element: class="fragment" data-fragment-index="1" -->
* Projects?<!-- .element: class="fragment" data-fragment-index="1" -->
  * é—²æ—¶è°ƒåº¦å¹³å°<!-- .element: class="fragment" data-fragment-index="3" -->
  * SP-CDN<!-- .element: class="fragment" data-fragment-index="3" -->
  * å¤§ä¿ƒä¿éšœé—¨æˆ·<!-- .element: class="fragment" data-fragment-index="2" -->
  * å…¨é“¾è·¯å‹æµ‹å¹³å°<!-- .element: class="fragment" data-fragment-index="2" -->

--

## #æˆ‘çš„å¹´åº¦å…³é”®è¯

* Platform
* Console
* Portal
* Dashboard
* ...ç¬‘æ­», CRUD!<!-- .element: class="fragment" data-fragment-index="1" -->

--

## Disclaimer

* ä¸å¸¦è´§
  * ä¸æ¨èå·¥å…·/æ¡†æ¶/é¡¹ç›®...
  * æä¾›é€ è½®å­çš„ idea
  * å¦‚æœ‰å¸¦è´§, çº¯å±å·§åˆ!<!-- .element: class="fragment" data-fragment-index="1" -->

--

* æ­¤æ¼”è®²ä¸åŒ…å«ä»¥ä¸‹å…ƒç´ 
  * Agile, æ•æ·...<!-- .element: class="fragment" data-fragment-index="1" -->
  * DevOps, GitOps...<!-- .element: class="fragment" data-fragment-index="1" -->
  * Martin Fowler å¤§å”<!-- .element: class="fragment" data-fragment-index="2" -->
  * DDD, å……è¡€/è´«è¡€...<!-- .element: class="fragment" data-fragment-index="3" -->
* è´´è¿‘ä¾‹å­<!-- .element: class="fragment" data-fragment-index="4" -->
* ä¸»è¦å› ä¸ºæˆ‘ä¹Ÿä¸æ‡‚ :)<!-- .element: class="fragment" data-fragment-index="5" -->

---

## å›åˆ°ä¸»é¢˜

* ç¼–è¯‘åŸç†<!-- .element: class="fragment" data-fragment-index="1" -->
* BE<!-- .element: class="fragment" data-fragment-index="2" -->
* CRUD<!-- .element: class="fragment" data-fragment-index="3" -->

--

ç¼–è¯‘åŸç†<!-- .element: class="r-fit-text" -->

--

## PLCT

* PL: Programming languages
* CT: Compiler technology

--

BE<!-- .element: class="r-fit-text" -->

--

## ğŸš©ğŸš©

* äº§å“è¯„å®¡ ğŸ‘Š<!-- .element: class="fragment" data-fragment-index="1" -->
* UX è¯„å®¡ ğŸ‘Š<!-- .element: class="fragment" data-fragment-index="2" -->
* FE æ¥å£æ–‡æ¡£ ğŸ‘Š<!-- .element: class="fragment" data-fragment-index="3" -->
* QA è¯„å®¡ ğŸ‘Š<!-- .element: class="fragment" data-fragment-index="3" -->
* TD è¯„å®¡ ğŸ‘Š<!-- .element: class="fragment" data-fragment-index="4" -->
* ğŸ§±<!-- .element: class="fragment" data-fragment-index="5" -->

--

## ğŸš©ğŸš©, again

* Testing ğŸ‘Š<!-- .element: class="fragment" data-fragment-index="1" -->
* UX èµ°æŸ¥ ğŸ‘Š<!-- .element: class="fragment" data-fragment-index="2" -->
* äº§å“èµ°æŸ¥ ğŸ‘Š<!-- .element: class="fragment" data-fragment-index="2" -->
* ğŸ§±<!-- .element: class="fragment" data-fragment-index="3" -->

--

â€œğŸ¥¢ğŸšä¸ç§¯æ, æ€æƒ³æœ‰é—®é¢˜!â€<!-- .element: class="r-fit-text" -->

--

CRUD<!-- .element: class="r-fit-text" -->

--

â€œå†™ CRUD ä¸ç”¨åŠ¨ ğŸ§ â€<!-- .element: class="r-fit-text" -->

---

ä»ç®€å•ä¸šåŠ¡ä½œä¸ºğŸ‘‹<!-- .element: class="r-fit-text" -->

--

## Shop

* Item
  * Name
  * Price
* Order<!-- .element: class="fragment highlight-red" data-fragment-index="1" -->
  * Item ID
  * Quantity
  * Total

--

## è®¢å• CRUD ç»„åˆæ‹³

* æ–°å¢è®¢å•
* åˆ é™¤è®¢å•
* æ›´æ”¹è®¢å•
* æŸ¥è¯¢è®¢å•

--

## ç»„åˆæ‹³è¿‡çŒ›

* æŸ¥è¯¢è®¢å•
  * åˆ†é¡µ
  * æŒ‰å­—æ®µå‡é™æ’åº
  * æŒ‰ å•/å¤š ä¸ª item ID ç­›é€‰
  * ä¸‹å•æ—¶é—´åŒºé—´ç­›é€‰
  * å­—æ®µæ¨¡ç³ŠæŸ¥è¯¢, ..., etc
* åˆ é™¤è®¢å•
  * è½¯åˆ é™¤

--

## We serve

* HTTP æœåŠ¡
  * API, controller, service, layer...<!-- .element: class="fragment" data-fragment-index="1" -->
  * Model, DTO, VO...<!-- .element: class="fragment" data-fragment-index="2" -->
  * DAO, mapper, repository...<!-- .element: class="fragment" data-fragment-index="1" -->
  * Entity, domain...<!-- .element: class="fragment" data-fragment-index="2" -->
    * Constants, enumerations...
* æ•°æ®åº“
  * MySQL, ..., etc

--

## CRUD âŒğŸ§ 

* é‡å¤çš„ä»£ç é€»è¾‘æœ‰å¾ˆå¤š
* æˆ‘æ€»éœ€è¦æ‹·è´/å‚è€ƒåˆ«äººçš„ä»£ç 
* é˜…è¯»ä»–äººä»£ç æ—¶éš¾è§…ä¸šåŠ¡æ ¸å¿ƒ
* åˆ«è¯´äº†, å†™å®Œç¬¬äºŒå¤©æˆ‘è‡ªå·±éƒ½å¿˜å†™äº†å•¥

--

## é‡å¤/ç¼ºå°‘æ ‡å‡†/ä½ç»„åˆ

* â€œä½ å’‹å®šä¹‰é¡µæ•°å’Œé¡µé•¿å‚æ•°çš„æ¥ç€?â€
* â€œURI é£æ ¼å’‹å®šå‘€â€
* â€œç»“æ„ä½“å †åˆ°è¦ç”¨çš„åœ°æ–¹æ—è¾¹å»å‘—â€
* â€œDTO å’Œ entity é•¿å¾—å·®ä¸å¤šå‘€, ç”¨åŒä¸€ä¸ªå‘—â€

--

â€œè¯¶, ä½ è¯´æ ‡å‡†?â€<!-- .element: class="r-fit-text" -->

--

Google REST Interface Design<!-- .element: class="r-fit-text" -->

--

## ğŸ™…ğŸ‘Š

* å¼ºåˆ¶åè¯å¤æ•°å½¢å¼??<!-- .element: class="fragment" data-fragment-index="1" -->
  * Category -> categories
  * Status -> statuses
* è¿‡åº¦å¼ºè°ƒ URI ä¸­çš„è®¿é—®å±‚çº§<!-- .element: class="fragment" data-fragment-index="2" -->
  * `/items/1/orders` âŒ
  * `/order?item=1&item=2` âœ…
* â€œGuide is specs, specs is codeâ€ by Anqur<!-- .element: class="fragment" data-fragment-index="3" -->
  * æ²¡æœ‰æä¾›ç›¸å…³å·¥å…·çš„è§„èŒƒå°±æ˜¯è€æµæ°“

---

â€œremake å§!â€<!-- .element: class="r-fit-text" -->

--

## ç°æœ‰æŠ½è±¡

* FE (stateful)
  * Event/state/effect
* BE (stateless)
  * DTO/API
  * Entity/DAO

--

â€œå¼€å‘æ–°ä¸šåŠ¡, å…ˆè®¾è®¡å“ªä¸ªå‘¢?â€<!-- .element: class="r-fit-text" -->

--

## å…ˆå†™ DTO/API å§

* DTO/API å†—ä½™å¤ªå¤š<!-- .element: class="fragment" data-fragment-index="1" -->

--

## DTO/API å†—ä½™å¤ªå¤š

* â€œåˆ†é¡µæŸ¥è¯¢ item å’Œ orderâ€
  * `ListItemReq`
  * `ListOrderReq`

--

## DTO é•¿å¾—ä¸€æ ·

```go
type ListItemReq struct {
    Page int
    Limit int
}

type ListOrderReq struct {
    Page int
    Limit int
}
```

--

* DTO/API æœ‰è®¸å¤š boilerplate ä»£ç 
* è®¸å¤šå‚æ•°ä¸æ¶‰åŠ item å’Œ order æœ¬èº«å±æ€§??
* ä¸€éƒ¨åˆ†å­—æ®µå°†ä¼šä¸ entity é‡å 
  * å°¤å…¶æ˜¯ insert/update/upsert

--

## å¥½å®¶ä¼™, æˆ‘ç›´æ¥ Ctrl C/V

```go
// åˆ é™¤ item.
type DeleteItemReq struct {
    ID uint64
}

// åˆ é™¤ order.
type DeleteOrderReq struct {
    ID uint64
}
```

--

â€œä¸ºä»€ä¹ˆæˆ‘ä¼šæƒ³å…ˆå†™ DTO/API å‘¢?â€<!-- .element: class="r-fit-text" -->

--

## æ¡†æ¶å¤ªæ½®äº†, è¦é£æ¹¿äº†

* æ•°æ®ä¼ è¾“æ ¼å¼: Protocol Buffers, Cap'n Proto
* RPC: gRPC, Thrift
* RESTful: Swagger, OpenAPI
* å¾®æœåŠ¡æ¡†æ¶: Dubbo, micro, kit
* æ¥å£ç®¡ç†å¹³å°: yapi, APIJSON, RAP

--

* ç”¨ç€æœ€ cool ğŸ˜çš„æ¡†æ¶,
* åšç€ä½æ”¶ç›ŠğŸ“‰çš„äº‹æƒ… (DTO/API)

--

## å½³äº, æˆ‘æ entity/DAO

* DTO/API å†—ä½™å¤ªå¤š
* Entity/DAO è¿˜æ˜¯æœ‰ç‚¹å†—ä½™<!-- .element: class="fragment" data-fragment-index="1" -->

--

## Entity ä¸­çš„å†—ä½™

```go
type Item struct {
    ID uint64

    Name    string  // çœŸæ­£çš„ä¸šåŠ¡
    Price   float64 // çœŸæ­£çš„ä¸šåŠ¡

    Deleted int

    CreateTime  int64
    CreateBy    string
    UpdateTime  int64
    UpdateBy    string
}
```

--

## DAO ä¸­çš„å†—ä½™

* `GetItemByID`
* `GetItemByXXX`
* `List`-/`Add`-/`Update`-/`DeleteItem`
* `ListAllItem`
* ...

--

## æ¡†æ¶è¿˜æ˜¯å¾ˆæ½®

* å›´ç»• database schema çš„å·¥å…·/æ¡†æ¶ (Go)
  * smallnest/gen
  * ent
  * xo
  * reform
  * ...

--

* æˆ‘è¿˜æ˜¯æœ‰å¾ˆå¤š boilerplate
* SQL æ— æ³•ç»„åˆ, ä¸è¿‡ Go ç»“æ„ä½“å¯ç»„åˆ
* ä½† DAO å®åœ¨å¤ªå¤š boilerplate äº†

--

## ç„¯, å…ˆæ FE, æˆ‘åŸåœ° low-code

* DTO/API å†—ä½™å¤ªå¤š
* Entity/DAO è¿˜æ˜¯æœ‰ç‚¹å†—ä½™
* FE ç›¸å½“å¤§éƒ¨åˆ†å¯¹ BE äº§ç”Ÿä¾èµ–<!-- .element: class="fragment" data-fragment-index="1" -->

--

## FE state å¯¹ BE çš„ä¾èµ–

* ä¸ä¾èµ– BE çš„ state
  * â€œå½“è¡¨å•ä¸ºç©º, æŒ‰é’®å–æ¶ˆç½®ç°â€ (UI ç»„ä»¶ç‹¬æœ‰çš„ state)
* è¡¨å•å†…å®¹ä½œä¸º state, é«˜åº¦ä¾èµ– BE
  * E.g. ä¿®æ”¹ order ä¿¡æ¯, ä¾èµ– `ListOrder` çš„å“åº”æ•°æ®

--

â€œä½ å°±è¯´å’‹æ•´å‘—ğŸ˜…â€<!-- .element: class="r-fit-text" -->

--

> â€œAll problems in computer science can be solved by another level of indirection.â€
>
> Butler Lampson

--

* å†åŠ ä¸€å±‚æŠ½è±¡, å’‹åŠ å•Š?
* æˆ‘è§‰å¾—ä½ ä»¬éƒ½çŒœå¾—åˆ°äº†<!-- .element: class="fragment" data-fragment-index="1" -->
  * ä»£ç ç”Ÿæˆ? ä¸€é”® CRUD?
* åœæ­¢åæ§½, è®²ç‚¹è½»æ¾ç®€å•çš„è¯é¢˜<!-- .element: class="fragment" data-fragment-index="2" -->
* ä»ç¼–è¯‘åŸç†ä¸­æ‰¾æ‰¾çµæ„Ÿ<!-- .element: class="fragment" data-fragment-index="3" -->

---

ç¼–è¯‘åŸç† Revisited<!-- .element: class="r-fit-text" -->

--

* ç¼–è¯‘å™¨/ç¼–ç¨‹è¯­è¨€ æ˜¯æˆ‘ä»¬æ¯å¤©éƒ½æ¥è§¦çš„ä¸œè¥¿
* å’Œ â€œç¼–è¯‘ (compilation)â€ æœ‰å…³

--

## å„ç±» â€œç¼–è¯‘â€ ç›¸å…³çš„è½¯ä»¶

* Interpreter (è§£é‡Šå™¨)<!-- .element: class="fragment" data-fragment-index="1" -->
  * Shell, Python
* AOT compiler (ahead-of-time)<!-- .element: class="fragment" data-fragment-index="2" -->
  * C/C++, `javac`, Go, Rust
* JIT compiler (just-in-time)<!-- .element: class="fragment" data-fragment-index="3" -->
  * JavaScript, Java HotSpot, Julia
* Transpiler (è½¬è¯‘å™¨)<!-- .element: class="fragment" data-fragment-index="4" -->
  * Babel
* Linter, language server, code formatter...<!-- .element: class="fragment" data-fragment-index="5" -->

--

## ä»€ä¹ˆæ˜¯ pass

* å°†åŸç»“æ„å®Œæ•´æ‰«æ, å¹¶å¾—åˆ°ç›¸åº”äº§ç‰©çš„ â€œè¿‡ç¨‹â€
* å¦‚, `.js` æºæ–‡ä»¶è½¬æ¢æˆè¯­æ³•æ ‘
* å¦‚, å¸¸é‡æŠ˜å , `a := 1 + 1` è½¬ä¸º `a := 2`

--

## å¸¸è§çš„ pass

* ä»¥ä¸€ç§ AOT compiler ä¸ºä¾‹

--

* Source code
  * Scan/lexical analysis/tokenization<!-- .element: class="fragment" data-fragment-index="1" -->
  * Scanner/lexical analyzer/tokenizer/lexer<!-- .element: class="fragment" data-fragment-index="1" -->
* Token stream

--

```py
["f","o","o",":","=","1"]
# | Tokenize
# v
[
  Token(Ident, "foo"),
  Token(Assign, ":="),
  Token(NumLit, "1"),
]
```

--

* Token stream
  * Parse/syntactical analysis<!-- .element: class="fragment" data-fragment-index="1" -->
  * Parser/syntactical analyzer<!-- .element: class="fragment" data-fragment-index="1" -->
* AST (æŠ½è±¡è¯­æ³•æ ‘)

--

```py
[
  Token(Ident, "foo"),
  Token(Assign, ":="),
  Token(NumLit, "1"),
]
# | Parse
# v
Assign(
  lhs=Token(Ident, "foo"),
  rhs=Token(NumLit, "1"),
)
```

--

* AST
  * Compile<!-- .element: class="fragment" data-fragment-index="1" -->
* IR (intermediate representation)
  * Bytecode<!-- .element: class="fragment" data-fragment-index="1" -->
  * SSA (single static assignment)<!-- .element: class="fragment" data-fragment-index="1" -->

--

```py
Assign(
  lhs=Token(Ident, "foo"),
  rhs=Token(NumLit, "1"),
)
# | Compile (SSA)
# v
Var("a1", 1)
```

--

* IR
  * codegen (code generation)<!-- .element: class="fragment" data-fragment-index="1" -->
* Target code
  * Assembly/machine code<!-- .element: class="fragment" data-fragment-index="1" -->

--

## ç¼–è¯‘å™¨ä¹Ÿåˆ†å‰åç«¯

* å‰ç«¯
  * Source code
  * Token stream
  * AST
* åç«¯
  * IR
  * Target code

--

â€œæ¥ç‚¹å¹²è´§, å¤ªå°‘äº†â€<!-- .element: class="r-fit-text" -->

--

* Source code/token stream
* Surface syntax<!-- .element: class="fragment" data-fragment-index="1" -->
* Concrete syntax<!-- .element: class="fragment" data-fragment-index="2" -->
* Abstract syntax
* IR
  * E.g. HIR, MIR, LIR...<!-- .element: class="fragment" data-fragment-index="3" -->
  * Neutral values<!-- .element: class="fragment" data-fragment-index="3" -->
* Target code

--

* Lexical/syntactical analysis
* Semantic analysis<!-- .element: class="fragment" data-fragment-index="1" -->
  * Scope check
  * Typecheck
  * Conversion check
* Compile
* Partial evaluation/optimization<!-- .element: class="fragment" data-fragment-index="2" -->
* Codegen

--

## Conversion check

![js-thanksgiving](./content/js-thanksgiving.jpeg)

--

* ç¼–è¯‘, é€šå¸¸æ˜¯ä¸ªä¿¡æ¯ç”±å°‘å˜å¤š, å†ç”±å¤šå˜å°‘çš„è½¬æ¢è¿‡ç¨‹

--

æé—®: å“ªä¸ªç»“æ„ä¿å­˜çš„ä¿¡æ¯æœ€å¤š?<!-- .element: class="r-fit-text" -->

--

Abstract syntax!<!-- .element: class="r-fit-text" -->

---

## å›åˆ°ä¸šåŠ¡

* è¯¶, æ˜¯ä¸æ˜¯å¯ä»¥æ‰¾ä¸€ä¸ªä¿å­˜ä¸šåŠ¡ä¿¡æ¯æœ€å¤šçš„ç»“æ„
* æ ¹æ®ç»“æ„ç”Ÿæˆæ‰€éœ€çš„ boilerplate å’Œå…¬æœ‰å‚æ•°/å­—æ®µ
* æ¯ä¸€ä¸ªç”Ÿæˆçš„åŠŸèƒ½è¦é«˜åº¦å¯é…ç½®
* ç›´æ¥ä»ä¸šåŠ¡æœ€æ ¸å¿ƒå‡ºå‘!

--

å“ªä¸ªç»“æ„ä¿å­˜çš„ä¸šåŠ¡ä¿¡æ¯æœ€å¤š?<!-- .element: class="r-fit-text" -->

--

`AddItemReq`<!-- .element: class="r-fit-text" -->

--

## Item æ˜¯æ€ä¹ˆæ¥æ»´

```go
type AddItemReq struct {
    Name    string
    Price   float64
}
```

--

## ä¸šåŠ¡é¢†åŸŸ

* å°†æ­¤ç»“æ„æŠ½è±¡ä¸º domain, ä¸šåŠ¡é¢†åŸŸ
* å®ƒæ˜¯ä¸šåŠ¡ç‹¬æœ‰çš„ â€œå˜åŒ– (variance)â€
* ç”Ÿæˆä¸€åˆ‡èƒ½ç”Ÿæˆçš„ç›®æ ‡ä»£ç 

--

## ä¸šåŠ¡ä¿¡æ¯, è¿˜ä¸å¤Ÿ

* éœ€è¦åŒ…å« ORM å’Œå­—æ®µæ ¡éªŒçš„ä¿¡æ¯

```go
type Item struct {
    Name    string  `gorm:"..." validate:"required,lte=200"`
    Price   float64 `gorm:"..." validate:"gte=0"`
}
```

--

## ä»£ç ç”Ÿæˆ

* CRUD DAO/entity/DTO/API
* çµæ´»çš„æŸ¥è¯¢
  * å­—æ®µ åŒ…å«/åŒ¹é…/å¤§äº/å°äº ç­›é€‰
  * æ¨¡ç³ŠæŸ¥è¯¢
  * åˆ†é¡µ
  * å­—æ®µæ’åº
* è½¯åˆ é™¤

--

## æ›´è¿‡åˆ†çš„ä»£ç ç”Ÿæˆ

* SQL DDL çš„ç”Ÿæˆ
* Swagger/OpenAPI çš„ç”Ÿæˆ (swaggo)
* å®¢æˆ·ç«¯ (openapi-generator)
  * å‰ç«¯ fetch ä»£ç 
  * åç«¯å…¶ä»–å®¢æˆ·ç«¯ä»£ç ç”Ÿæˆ
  * æµ‹è¯•ç”¨ä¾‹å®¢æˆ·ç«¯ç”Ÿæˆ

--

## æ›´è¿‡åˆ†çš„æ‘¸é±¼è¡Œä¸º

* åŸºäº `go-validator`, å…è´¹è·å¾—
  * åŸºç¡€çš„å­—æ®µæ ¡éªŒ
  * æ ¡éªŒå¤±è´¥çš„ i18n ä¿¡æ¯

--

## æ›´ç²¾å½©çš„ä¸šåŠ¡åŠŸèƒ½

* Upsert ä¸€æ¡è®°å½•
  * æ’å…¥æ—¶, å†™å…¥åˆ›å»ºæ—¶é—´/æ›´æ–°æ—¶é—´
  * ä¿®æ”¹æ—¶, ä¿®æ”¹æ›´æ–°æ—¶é—´, åˆ›å»ºæ—¶é—´ä¸åŠ¨
  * ç”¨æœ€å°‘çš„ä»£ç å®Œæˆè¿™ä¸¤ä»¶äº‹?

--

```go [|3-4]
// Domain.
type Estimate struct {
    CampaignID  uint64  `gorm:"uniqueindex:idx_estimate_uniq"`
    Region      string  `gorm:"uniqueindex:idx_estimate_uniq"`
    PCU         uint    `gorm:"..."`
}
```

--

```go [|6-8|10-11]
// Generated API.
func upsertEstimate(...) {
    // ...
    now := time.Now().Unix()
    daos.UpsertEstimate(&entities.Estimate{
        CampaignID: req.CampaignID,
        Region: req.Region,
        PCU: req.PCU,

        CreateTime: now,
        UpdateTime: now,
    })
    // ...
}
```

--

```go [|5-7|9]
// Generated DAO.
func (d Dao) UpsertEstimate(e *entities.Estimate) error {
    return d.Tx.Clauses(clause.OnConflict{
        DoUpdates: clause.AssignmentColumns([]string{
            "campaign_id",
            "region",
            "pcu",

            "update_time",
        }),
    }).Create(e).Error
}
```

--

## å¼€å‘æµç¨‹

* å£°æ˜ domain
  * ç”Ÿæˆ DAO/entity/DTO/API, å¯å®šåˆ¶
  * ç”Ÿæˆ SQL DDL, åˆ›å»ºæ•°æ®è¡¨
  * ç”Ÿæˆ Swagger
    * FE åŒå­¦ç”Ÿæˆ fetch å®¢æˆ·ç«¯
    * QA åŒå­¦ç”Ÿæˆæµ‹è¯•å®¢æˆ·ç«¯

> â€œæ­£å¯è°“æ¬ç –å†™ bug å¿…å¤‡ä¹‹è‰¯è¯.â€

--

â€œé‚£ä¹ˆ, åœ¨å“ªé‡Œå¯ä»¥ä¹°åˆ°å‘¢?â€<!-- .element: class="r-fit-text" -->

--

## Apiee ğŸ’–

* [n.shp.ee/apiee](https://n.shp.ee/apiee)<!-- .element: class="r-fit-text" -->

--

## ç°çŠ¶: å…¨é“¾è·¯å‹æµ‹å¹³å°

* BE
  * Entity/DDL: >95% ç”Ÿæˆ, 100% åˆ©ç”¨ç‡
  * DAO: ~80% åˆ©ç”¨ç‡
  * DTO/API: ~30% åˆ©ç”¨ç‡
* FE: fetch ä»£ç  100% ç”Ÿæˆ/åˆ©ç”¨

--

## Future works

* â€œæƒ³ç”Ÿæˆ Java ä»£ç å’‹åŠå•Š?â€
* å­—æ®µ ORM ç±»å‹ä¸º text, Go ç±»å‹ä¸ºç»“æ„ä½“, è‡ªåŠ¨ (un)marshaling
* 1-to-N, M-to-N ä»ç¼ºä¹å¥½çš„æ–¹æ¡ˆ
* ...

--

## æŠŠå…¬å±æ‰“åœ¨ä¿æŠ¤ä¸Š

* å’±ä¹Ÿå°±æä¾›ä¸ªæ€è·¯, æœŸå¾…åˆ†äº«ä½ æ›´ç²¾å¦™çš„ç‚¹å­
* è¯¶? ä½ è®²çš„è¿™ä¸»é¢˜å’Œç¼–è¯‘åŸç†æœ‰æ¯›å…³ç³»?<!-- .element: class="fragment" data-fragment-index="1" -->

--

## ç»†æ€ææ

* â€œORM å…¶å®å°±æ˜¯ SQL AST builder + pretty printerâ€ by Anqur
* DAO/API å³æ˜¯ pass, DTO/entity æ˜¯ åŸå§‹ç»“æ„/ç›®æ ‡äº§ç‰©??<!-- .element: class="fragment" data-fragment-index="1" -->
  * ä»¥åæ¦‚å…¨å•¦ :)
* å¼„æ½®å„¿, GraphQL, å„ç§æ–°é²œç©æ„, æ€»ç¦»ä¸å¼€ç¼–è¯‘åŸç†çš„çŸ¥è¯†<!-- .element: class="fragment" data-fragment-index="2" -->

--

## Thanks

* å¯¹ä»¥ä¸‹è¯é¢˜æ„Ÿå…´è¶£è€…, æ¬¢è¿ä¸€åŒæ¢è®¨
  * ç¼–ç¨‹è¯­è¨€ç†è®º
  * å‡½æ•°å¼ç¼–ç¨‹
  * ç±»å‹è®º/æ•°ç†é€»è¾‘/èŒƒç•´è®º...
* Merry XmasğŸ„

--

Q&A<!-- .element: class="r-fit-text" -->
