# 不会编译原理的 BE 不是好 CRUD boy

2021.12.23 @ Shopee Academy

--

整个活儿<!-- .element: class="r-fit-text" -->

--

## 白金赞助

* Shopee Academy
* ShopeePlay/🦐玩乐队<!-- .element: class="fragment" data-fragment-index="1" -->
  * 尤其是 Levi

--

## Anqur

* Engineering Infra BE
* Since 2020.12.2
* Projects?<!-- .element: class="fragment" data-fragment-index="1" -->
  * 闲时调度平台<!-- .element: class="fragment" data-fragment-index="2" -->
  * SP-CDN<!-- .element: class="fragment" data-fragment-index="2" -->
  * 大促保障门户<!-- .element: class="fragment" data-fragment-index="1" -->
  * 全链路压测平台<!-- .element: class="fragment" data-fragment-index="1" -->

--

## #我的年度关键词

* Platform
* Console
* Portal
* ...笑死, CRUD!<!-- .element: class="fragment" data-fragment-index="1" -->

--

## Disclaimer

* 不带货
  * 不推荐工具/框架/项目...
  * 提供造轮子的 idea
  * 如有带货, 纯属巧合!<!-- .element: class="fragment" data-fragment-index="1" -->

--

* 此演讲不包含以下元素
  * Agile, 敏捷...<!-- .element: class="fragment" data-fragment-index="1" -->
  * DevOps, GitOps...<!-- .element: class="fragment" data-fragment-index="1" -->
  * Martin Fowler 大叔<!-- .element: class="fragment" data-fragment-index="2" -->
  * DDD, 充血/贫血...<!-- .element: class="fragment" data-fragment-index="3" -->
* 贴近例子<!-- .element: class="fragment" data-fragment-index="4" -->
* 主要因为我也不懂 :)<!-- .element: class="fragment" data-fragment-index="5" -->

---

## 回到主题

* 编译原理<!-- .element: class="fragment" data-fragment-index="1" -->
* BE<!-- .element: class="fragment" data-fragment-index="2" -->
* CRUD<!-- .element: class="fragment" data-fragment-index="3" -->

--

编译原理<!-- .element: class="r-fit-text" -->

--

## PLCT

* PL: Programming languages
* CT: Compiler technology

--

BE<!-- .element: class="r-fit-text" -->

--

## 🚩🚩

* 产品评审 👊<!-- .element: class="fragment" data-fragment-index="1" -->
* UX 评审 👊<!-- .element: class="fragment" data-fragment-index="2" -->
* FE 接口文档 👊<!-- .element: class="fragment" data-fragment-index="3" -->
* QA 评审 👊<!-- .element: class="fragment" data-fragment-index="3" -->
* TD 评审 👊<!-- .element: class="fragment" data-fragment-index="4" -->
* 🧱<!-- .element: class="fragment" data-fragment-index="5" -->

--

## 🚩🚩, again

* Testing 👊<!-- .element: class="fragment" data-fragment-index="1" -->
* UX 走查 👊<!-- .element: class="fragment" data-fragment-index="2" -->
* 产品走查 👊<!-- .element: class="fragment" data-fragment-index="2" -->
* 🧱<!-- .element: class="fragment" data-fragment-index="3" -->

--

“🥢🍚不积极, 思想有问题!”<!-- .element: class="r-fit-text" -->

--

CRUD<!-- .element: class="r-fit-text" -->

--

“写 CRUD 不用动 🧠”<!-- .element: class="r-fit-text" -->

---

## 从简单业务作为抓手

* Item
  * Name
  * Price
* Order<!-- .element: class="fragment highlight-red" data-fragment-index="1" -->
  * Item ID
  * Quantity
  * Total

--

## 订单 CRUD 组合拳

* 新增订单
* 删除订单
* 更改订单
* 查询订单

--

## 组合拳过猛

* 查询订单
  * 分页
  * 按字段升降排序
  * 按 单/多 个 item ID 筛选
  * 下单时间区间筛选
  * 字段模糊查询, ..., etc
* 删除订单
  * 软删除

--

## We serve

* HTTP 服务
  * API, controller, service...<!-- .element: class="fragment" data-fragment-index="1" -->
  * Model, DTO, VO...<!-- .element: class="fragment" data-fragment-index="2" -->
  * DAO, mapper, repository...<!-- .element: class="fragment" data-fragment-index="1" -->
  * Entity...<!-- .element: class="fragment" data-fragment-index="2" -->
    * Constants, enumerations...
* 数据库
  * MySQL, ..., etc

--

## CRUD ❌🧠

* 重复的代码逻辑有很多
* 我总需要拷贝/参考别人的代码
* 阅读他人代码时难觅业务核心
* 别说了, 写完第二天我自己都忘写了啥

--

## 重复/缺少标准/低组合

* “你咋定义页数和页长参数的来着?”
* “URI 风格咋定呀”
* “结构体堆到要用的地方旁边去呗”
* “DTO 和 entity 长得差不多呀, 用同一个呗”

--

“诶, 你说标准?”<!-- .element: class="r-fit-text" -->

--

Google REST Interface Design<!-- .element: class="r-fit-text" -->

--

## 🙅

* 强制名词复数形式??<!-- .element: class="fragment" data-fragment-index="1" -->
* 过度强调 URI 中的访问层级<!-- .element: class="fragment" data-fragment-index="1" -->
* “Guide is specs, specs is code”<!-- .element: class="fragment" data-fragment-index="2" -->
  * 没有提供相关工具的规范就是耍流氓

--

> “All problems in computer science can be solved by another level of indirection.”
>
> Butler Lampson
